# AI Tab Clear

一个智能的 Chrome 浏览器标签页自动关闭扩展。

## 功能特性

### 🎯 核心功能
### 🎯 核心功能
- **自动关闭闲置标签页** - 设定标签页闲置时间，超时自动关闭
- **标签页数量阈值** - 只有当标签页数量超过设定值时才开始自动关闭
- **智能重复域名清理** - 同一域名超过3个标签页时，自动关闭旧标签（需满足最小标签页数量）
- **原生标签页自动清理** - 自动关闭闲置的 chrome:// 系统标签页（不受数量限制）
- **固定标签页保护** - 默认保护固定标签页不被关闭，可配置
- **白名单/黑名单** - 使用关键词模糊匹配，灵活控制关闭规则
- **智能分组** - 支持 **本地算法** (快速) 和 **AI 智能** (精准) 两种分组方式
- **手动分组** - 支持一键对历史记录重新分组
- **历史记录** - 记录所有自动关闭的标签页，支持一键恢复，可设置保留条数（50/100/200）
- **暂停/继续** - 随时暂停或恢复自动关闭功能
- **防重复记录** - 智能去重，避免历史记录重复

### 🎨 界面设计
- 日间/夜间主题切换
- 现代化深色主题
- 玻璃态效果 (Glassmorphism)
- 流畅的动画过渡
- 简约优雅的设计

## 安装方法

### 开发者模式安装

1. 下载或克隆此项目到本地
2. 打开 Chrome 浏览器，访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹 `ai-tab-clear`
6. 安装完成！

### 图标说明

由于图标生成配额限制，您需要手动添加图标文件：

在 `icons/` 文件夹中添加以下三个图标文件：
- `icon16.png` (16x16 像素)
- `icon48.png` (48x48 像素)
- `icon128.png` (128x128 像素)

建议使用紫蓝色渐变 (#6366f1 到 #8b5cf6) 的简约标签图标设计。

您可以使用在线工具如 [Favicon.io](https://favicon.io/) 或 [Canva](https://www.canva.com/) 快速创建图标。

## 使用说明

### 基本设置

1. 点击浏览器工具栏中的扩展图标
2. 切换到"设置"标签页
3. 配置以下选项：
   - **闲置时间**：设置标签页闲置多久后自动关闭（单位：分钟）
   - **最小标签页数量**：超过此数量才开始自动关闭标签页
   - **自动关闭重复域名**：开启后，同一域名超过3个标签页时自动关闭旧标签（需满足最小标签页数量）
   - **自动关闭原生标签**：开启后，自动关闭闲置的系统标签页
   - **原生标签闲置时间**：设置原生标签页的闲置关闭时间（单位：分钟）
   - **保护固定标签页**：开启后，永远不关闭固定的标签页
   - **白名单**：输入关键词，URL包含该关键词的标签页不会被关闭
   - **黑名单**：输入关键词，URL包含该关键词的标签页会立即关闭
   - **历史记录保留条数**：设置保留的历史记录数量（50/100/200）
   - **AI 智能分类**：开启后，自动调用 AI 对历史记录进行分类（需填写 API Key）
4. 点击右上角的 🌙/☀️ 图标可切换日间/夜间主题

### 白名单/黑名单示例

```
# 白名单示例（每行一个正则表达式）
google\.com
github\.com
localhost
.*\.example\.com

# 黑名单示例
ads\..*
spam\..*
```

### 历史记录

- 切换到"历史记录"标签页查看所有自动关闭的标签页
- 点击任意历史记录即可重新打开该标签页
- 点击"清空历史"按钮可清除所有记录

### 暂停/继续

- 点击右上角的"暂停"按钮可临时停止自动关闭功能
- 再次点击"继续"按钮恢复功能

## 工作原理

1. **标签页监控**：后台服务持续监控所有标签页的活动状态
2. **闲置检测**：记录每个标签页的最后活动时间
3. **重复检测**：检查同一域名的标签页数量，超过3个自动关闭旧标签（保留2个）
4. **数量检测**：检查当前打开的标签页总数是否超过设定阈值
5. **规则匹配**：
   - 白名单中的标签页永远不会被关闭
   - 黑名单中的标签页会立即关闭
   - 其他标签页根据闲置时间判断
5. **自动关闭**：超过设定闲置时间的标签页会被自动关闭并保存到历史记录
6. **去重处理**：相同 URL 的标签页只保留最新的历史记录

## 技术栈

- **Manifest V3** - 最新的 Chrome 扩展规范
- **Service Worker** - 后台任务处理
- **Chrome Storage API** - 数据持久化
- **Chrome Alarms API** - 定时任务
- **Modern CSS** - 玻璃态设计、渐变、动画

## 文件结构

```
ai-tab-clear/
├── manifest.json      # 扩展配置文件
├── background.js      # 后台服务 Worker
├── popup.html         # 弹窗界面
├── popup.js           # 弹窗逻辑
├── popup.css          # 样式文件
├── icons/             # 图标文件夹
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
└── README.md          # 说明文档
```

## 隐私说明

本扩展：
- ✅ 所有数据仅存储在本地
- ✅ 不收集任何用户信息
- ✅ 不发送任何网络请求
- ✅ 完全开源，代码透明

## 常见问题

### Q: 为什么标签页没有自动关闭？
A: 请检查：
1. 扩展是否已启用
2. 功能是否处于暂停状态
3. 标签页是否在白名单中
4. 闲置时间设置是否合理

### Q: 如何防止某些网站的标签页被关闭？
A: 在设置中的白名单添加对应的域名正则表达式，例如 `google\.com`

### Q: 历史记录会一直保存吗？
A: 历史记录最多保存 100 条，超过后会自动删除最旧的记录

### Q: 可以立即关闭某些网站的标签页吗？
A: 可以，在黑名单中添加对应的域名正则表达式即可

## 开发者

如需修改或二次开发，请参考以下文件：
- `background.js` - 核心逻辑和自动关闭算法
- `popup.js` - 界面交互逻辑
- `popup.css` - 样式和主题定制

## 许可证

MIT License

## 更新日志

### v1.1.0 (2025-12-02)
- ✨ 新增智能重复域名清理功能
- 🎨 全新现代化简约 UI 设计
- ⚡️ 优化性能和动画效果

### v1.0.0 (2025-12-02)
- 🎉 首次发布
- ✨ 自动关闭闲置标签页
- ✨ 标签页数量阈值控制
- ✨ 白名单/黑名单支持
- ✨ 历史记录功能
- ✨ 暂停/继续功能
- ✨ 日间/夜间主题切换
- ✨ 现代化 UI 设计
